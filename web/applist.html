<!DOCTYPE html>
<html ng-app="AppList">
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>XS市集 - 管理上傳的策略資料</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
    <script src="bower_components/angular/angular.min.js"></script>
    <script src="bower_components/underscore/underscore-min.js"></script>
    <script>
        var thisApp = angular.module('AppList', []);
    </script>
    <script src="js/applistctrl.js"></script>
</head>
<body ng-controller="AppListCtrl">
    <div class="container">
        <div class="page-header">
            <h3>策略管理</h3>
        </div>
        <div class="alert alert-danger" ng-show="error">
            存取資料時發生錯誤: ({{data.error}}).
        </div>
        <div class="row grid-row">
            <div class="col-xs-10">
                <div class="input-group">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                    <input type="text" class="form-control" placeholder="輸入策略名稱" ng-model="nameFilter">
                    <div class="input-group-btn">
                        <button class="btn btn-info" ng-click="nameFilter='';"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
                <table class="table table-striped table-bordered table-hover" ng-hide="error">
                    <thead>
                        <tr>
                            <td><a href="#" ng-click="orderByField='folder';">目錄</a></td>
                            <td><a href="#" ng-click="orderByField='name';">名稱</a></td>
                            <td>GUID</td>
                            <td class="text-center"><a href="#" ng-click="orderByField='marketStatus';">上架狀態</a></td>
                            <td class="text-center"><a href="#" ng-click="orderByField='marketId';">編號</a></td>
                            <td class="text-center"><a href="#" ng-click="orderByField='execId';">執行主機</a></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="app in appList | filterByName:nameFilter | orderBy:orderByField">
                            <td>{{app.folder}}</td>
                            <td>{{app.name}}</td>
                            <td>{{app.guid}}</td>
                            <td ng-class="getMarketStatusClassName(app)">{{getMarketStatusString(app)}}</td>
                            <td class="text-center">{{app.marketId}}</td>
                            <td class="text-center">{{app.execId}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-xs-2">
                <ul class="list-group" ng-hide="data.error">
                    <li class="list-group-item"><span class="badge pull-right">{{getTotalCount()}}</span>全部</li>
                    <li class="list-group-item"><span class="badge pull-right">{{getMarketStatusCount(1)}}</span>上架</li>
                    <li class="list-group-item list-group-item-warning"><span class="badge pull-right">{{getMarketStatusCount(0)}}</span>尚未上架</li>
                    <li class="list-group-item list-group-item-danger"><span class="badge pull-right">{{getExecCount(0)}}</span>未指定主機</li>
                    <li class="list-group-item list-group-item-info"><span class="badge pull-right">{{getExecCount(1)}}</span>主機(1)</li>
                    <li class="list-group-item list-group-item-info"><span class="badge pull-right">{{getExecCount(2)}}</span>主機(2)</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>